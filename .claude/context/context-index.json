{
  "schema_version": "2.0",
  "context_id": "ctx-pcai-20260127",
  "project": {
    "name": "PC_AI",
    "type": "diagnostics-agent-with-native-acceleration",
    "location": "C:\\Users\\david\\PC_AI",
    "platform": "Windows 10/11",
    "integrations": ["WSL2", "Docker", "Hyper-V", "Ollama", "LM Studio", "vLLM", "Rust FFI", "C# P/Invoke", "FunctionGemma"]
  },
  "context": {
    "version": "5.1.0",
    "created": "2025-01-23",
    "updated": "2026-01-27",
    "files": {
      "full": "project-context.md",
      "native": "native-acceleration-context.md",
      "detailed": "pc-ai-project-context.md",
      "quick": "quick-context.md",
      "latest": "pcai-context-20260127.md",
      "index": "context-index.json"
    }
  },
  "state": {
    "current_phase": "post_refactoring_modernization",
    "phase_description": "Major refactoring complete, dependencies modernized, security fixes applied",
    "core_functional": true,
    "native_functional": true,
    "migration_pending": false,
    "uncommitted_changes": 0,
    "latest_commit": "2bbbbbc",
    "latest_commit_message": "security: fix CVE-2025-4565 and modernize dependencies"
  },
  "security": {
    "dependabot_alerts": {
      "total": 3,
      "fixed": 2,
      "open": 1
    },
    "cves_fixed": [
      {"id": "CVE-2024-30105", "package": "System.Text.Json", "fixed_version": "8.0.5"},
      {"id": "CVE-2024-43485", "package": "System.Text.Json", "fixed_version": "8.0.5"}
    ],
    "cves_pending": [
      {"id": "CVE-2026-0994", "package": "protobuf", "status": "No upstream fix available", "note": "Only affects pure-Python implementation"}
    ]
  },
  "native_acceleration": {
    "architecture": "Rust DLL + C# Hybrid Framework",
    "refactoring_status": "COMPLETE",
    "phases": {
      "phase1": { "name": "Foundation", "module": "pcai_core_lib", "status": "COMPLETE" },
      "phase2": { "name": "Search Module", "module": "pcai_search", "status": "COMPLETE" },
      "phase3": { "name": "Performance Module", "module": "pcai_performance", "status": "COMPLETE" },
      "phase4": { "name": "System Module", "module": "pcai_system", "status": "COMPLETE" },
      "phase5": { "name": "Integration", "status": "PLANNED" },
      "phase6": { "name": "CI/CD", "status": "PLANNED" }
    },
    "recent_changes": {
      "csharp_refactor": "PcaiNative.cs split into 9 modular files",
      "rust_refactor": "telemetry.rs modularized into telemetry/ submodules",
      "new_modules": ["vmm_health.rs", "prompt_engine.rs"]
    },
    "dependencies": {
      "rust": {
        "sysinfo": "0.38",
        "windows-sys": "0.61",
        "winreg": "0.55",
        "rayon": "1.10",
        "serde": "1.0",
        "serde_json": "1.0"
      },
      "csharp": {
        "Microsoft.PowerShell.SDK": "7.5.4",
        "System.Text.Json": "8.0.5"
      }
    }
  },
  "python_dependencies": {
    "protobuf": ">=6.31.1",
    "transformers": ">=4.47.0",
    "torch": ">=2.5.0",
    "accelerate": ">=1.2.0",
    "datasets": ">=3.2.0",
    "peft": ">=0.14.0",
    "trl": ">=0.12.0",
    "huggingface_hub": ">=0.27.0"
  },
  "key_files": {
    "native": {
      "rust_workspace": "Native/pcai_core/Cargo.toml",
      "core_lib": "Native/pcai_core/pcai_core_lib/src/lib.rs",
      "system_module": "Native/pcai_core/pcai_core_lib/src/system.rs",
      "telemetry_module": "Native/pcai_core/pcai_core_lib/src/telemetry/mod.rs",
      "csharp_core": "Native/PcaiNative/PcaiCore.cs",
      "csharp_diagnostics": "Native/PcaiNative/PcaiDiagnostics.cs"
    },
    "llm": {
      "module": "Modules/PC-AI.LLM/PC-AI.LLM.psm1",
      "config": "Config/llm-config.json",
      "functiongemma": "Deploy/functiongemma-finetune/"
    },
    "powershell": {
      "cli": "PC-AI.ps1",
      "cli_module": "Modules/PC-AI.CLI/PC-AI.CLI.psm1"
    }
  },
  "recent_commits": [
    {"sha": "2bbbbbc", "message": "security: fix CVE-2025-4565 and modernize dependencies"},
    {"sha": "c0ba5d7", "message": "chore: add prompt tests and update gitignore"},
    {"sha": "21f9911", "message": "refactor(cli): simplify PC-AI.ps1 entry point"},
    {"sha": "a5fabd5", "message": "chore: update reports and tooling scripts"},
    {"sha": "fa1806c", "message": "test: add comprehensive test suite"},
    {"sha": "4c99b34", "message": "docs: add agent guidance and architecture documentation"},
    {"sha": "e772123", "message": "chore(config): update LLM and tool configurations"},
    {"sha": "7759a4c", "message": "feat(deploy): enhance FunctionGemma training pipeline"},
    {"sha": "0df1b25", "message": "feat(modules): add CLI module and update manifests"},
    {"sha": "92b9303", "message": "feat(virtualization): enhance WSL/Docker health checks"},
    {"sha": "bcca140", "message": "feat(usb): add native USB diagnostics support"},
    {"sha": "69a1fb3", "message": "feat(llm): add routed chat and log search capabilities"},
    {"sha": "51b027d", "message": "refactor(rust): modularize telemetry into submodules"},
    {"sha": "c13119b", "message": "refactor(native): split PcaiNative.cs into modular components"}
  ],
  "agents": {
    "registry": [
      {
        "agent": "commit-cluster",
        "task": "Clustered and committed 130+ files into 13 semantic commits",
        "completed_at": "2026-01-27T12:30:00Z",
        "handoff_notes": "All changes pushed to origin/main"
      },
      {
        "agent": "security-auditor",
        "task": "Analyzed Dependabot alerts, applied CVE fixes",
        "files_touched": ["requirements.txt", "pyproject.toml", "Cargo.toml", "system.rs"],
        "completed_at": "2026-01-27T13:30:00Z",
        "handoff_notes": "2 CVEs fixed, 1 pending upstream"
      },
      {
        "agent": "rust-pro",
        "task": "Fixed sysinfo 0.38 breaking API change",
        "files_touched": ["Native/pcai_core/pcai_core_lib/src/system.rs"],
        "completed_at": "2026-01-27T13:25:00Z",
        "handoff_notes": "temperature() now returns Option<f32>, using unwrap_or(0.0)"
      }
    ],
    "recommended_next": ["test-runner", "python-pro", "security-auditor"],
    "coordination_notes": "Monitor protobuf CVE-2026-0994 for upstream fix"
  },
  "roadmap": {
    "immediate": [
      "Run full test suite to verify refactoring",
      "Validate Rust DLL builds on clean checkout"
    ],
    "this_week": [
      "Monitor protobuf for security patch",
      "Test FunctionGemma training with updated dependencies",
      "Update documentation for new module structure"
    ],
    "tech_debt": [
      "Remove unused GUID constants in vmm_health.rs",
      "Add tests for new CLI module",
      "Document Native/PcaiNative refactored structure"
    ]
  }
}
