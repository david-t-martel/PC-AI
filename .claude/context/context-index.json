{
  "schema_version": "2.0",
  "context_id": "ctx-pcai-20260128-s2",
  "project": {
    "name": "PC_AI",
    "type": "diagnostics-agent-with-native-acceleration",
    "location": "C:\\Users\\david\\PC_AI",
    "platform": "Windows 10/11",
    "integrations": ["WSL2", "Docker", "Hyper-V", "Ollama", "LM Studio", "vLLM", "Rust FFI", "C# P/Invoke", "FunctionGemma", "CargoTools"]
  },
  "context": {
    "version": "5.3.0",
    "created": "2025-01-23",
    "updated": "2026-01-28",
    "files": {
      "full": "project-context.md",
      "native": "native-acceleration-context.md",
      "detailed": "pc-ai-project-context.md",
      "quick": "quick-context.md",
      "latest": "pcai-context-20260128-session2.md",
      "cargotools_fixes": "cargotools-critical-fixes-2026-01-28.md",
      "index": "context-index.json"
    }
  },
  "state": {
    "current_phase": "cargotools_fixes_complete",
    "phase_description": "CargoTools critical fixes applied - mutex, TOCTOU race, hardcoded paths. 16/17 tests passing.",
    "core_functional": true,
    "native_functional": true,
    "migration_pending": false,
    "uncommitted_changes": 14,
    "latest_commit": "a91f737",
    "latest_commit_message": "docs(plans): add rust LLM tooling enhancement plan and fix documentation"
  },
  "security": {
    "dependabot_alerts": {
      "total": 1,
      "fixed": 0,
      "open": 1
    },
    "cves_fixed": [
      {"id": "CVE-2024-30105", "package": "System.Text.Json", "fixed_version": "8.0.5"},
      {"id": "CVE-2024-43485", "package": "System.Text.Json", "fixed_version": "8.0.5"}
    ],
    "cves_pending": [
      {"id": "high-severity", "package": "unknown", "status": "Review required", "url": "https://github.com/david-t-martel/PC-AI/security/dependabot/1"}
    ]
  },
  "cargotools": {
    "module_path": "C:\\Users\\david\\OneDrive\\Documents\\PowerShell\\Modules\\CargoTools\\",
    "version": "0.4.0",
    "test_coverage": "~20%",
    "tests_passing": 16,
    "tests_total": 17,
    "critical_fixes_applied": [
      "Mutex acquisition (WaitOne instead of just create)",
      "TOCTOU race condition (atomic FileMode::CreateNew)",
      "Hardcoded paths (dynamic Resolve-CacheRoot)"
    ],
    "pending_work": [
      "Increase test coverage to 85%",
      "Add ShouldProcess support",
      "Split Environment.ps1",
      "Implement Invoke-CargoAudit",
      "Implement Invoke-CargoExpand",
      "Implement Invoke-CargoBloat"
    ]
  },
  "rust_functiongemma": {
    "train_path": "Deploy/rust-functiongemma-train/",
    "runtime_path": "Deploy/rust-functiongemma-runtime/",
    "workspace_path": "Deploy/rust-functiongemma/",
    "status": "partial",
    "runtime_engine": "heuristic",
    "model_inference": "experimental",
    "p0_remaining": [
      "OpenAI-compatible Chat Completions endpoint",
      "Router prompt format",
      "Dataset generator",
      "LoRA/QLoRA support",
      "Checkpoint resume"
    ],
    "uncommitted_files": 14
  },
  "native_acceleration": {
    "architecture": "Consolidated Rust DLL + C# Hybrid Framework",
    "refactoring_status": "COMPLETE",
    "structure": {
      "workspace": "Native/pcai_core/",
      "core_lib": "pcai_core_lib/",
      "modules": ["fs", "performance", "search", "system", "telemetry"]
    }
  },
  "key_files": {
    "cargotools": {
      "module": "C:\\Users\\david\\OneDrive\\Documents\\PowerShell\\Modules\\CargoTools\\",
      "wrapper": "Public/Invoke-RustAnalyzerWrapper.ps1",
      "environment": "Private/Environment.ps1",
      "health_check": "Public/Test-RustAnalyzerHealth.ps1",
      "llm_output": "Private/LlmOutput.ps1",
      "tests": "Tests/Invoke-RustAnalyzerWrapper.Tests.ps1"
    },
    "plans": {
      "consolidation": ".claude/plans/rust-analyzer-consolidation-plan.md",
      "llm_tooling": ".claude/plans/rust-llm-tooling-enhancement.md"
    },
    "scripts": {
      "health_check": "Scripts/Test-RustAnalyzerHealth.ps1",
      "cleanup": "Scripts/Cleanup-RustAnalyzer.ps1",
      "test_module": "Scripts/Test-CargoToolsModule.ps1"
    },
    "shim": "C:\\Users\\david\\bin\\rust-analyzer.cmd"
  },
  "recent_commits": [
    {"sha": "a91f737", "message": "docs(plans): add rust LLM tooling enhancement plan and fix documentation"},
    {"sha": "23f3434", "message": "feat(rust): implement CargoTools rust-analyzer singleton integration"},
    {"sha": "ce556d7", "message": "docs(context): add rust-analyzer memory analysis findings"},
    {"sha": "107f4e2", "message": "chore(context): save session context for 2026-01-28"},
    {"sha": "06092bb", "message": "chore: update context and configuration files"},
    {"sha": "1200f97", "message": "test: update FFI tests and add new integration tests"},
    {"sha": "0f619a7", "message": "feat(training): add Rust-based FunctionGemma trainer"}
  ],
  "agents": {
    "registry": [
      {
        "agent": "rust-pro",
        "task": "Installation consolidation analysis",
        "completed_at": "2026-01-28T18:00:00Z",
        "handoff_notes": "Found 0-byte empty file, PATH priority issues"
      },
      {
        "agent": "rust-pro",
        "task": "VS Code configuration",
        "completed_at": "2026-01-28T18:00:00Z",
        "handoff_notes": "Balanced config applied"
      },
      {
        "agent": "rust-pro",
        "task": "Process monitoring setup",
        "completed_at": "2026-01-28T18:00:00Z",
        "handoff_notes": "Health check script created"
      },
      {
        "agent": "powershell-pro",
        "task": "CargoTools module review",
        "completed_at": "2026-01-28T19:00:00Z",
        "handoff_notes": "Critical issues identified and fixed"
      },
      {
        "agent": "architect-reviewer",
        "task": "Architecture review",
        "completed_at": "2026-01-28T19:00:00Z",
        "handoff_notes": "SRP violation in Environment.ps1"
      },
      {
        "agent": "api-documenter",
        "task": "LLM output documentation",
        "completed_at": "2026-01-28T19:00:00Z",
        "handoff_notes": "JSON envelope format documented"
      }
    ],
    "recommended_next": [
      "test-automator: Write additional Pester tests for 85% coverage",
      "rust-pro: Complete rust-functiongemma-runtime OpenAI endpoint",
      "powershell-pro: Implement Invoke-CargoAudit wrapper"
    ],
    "coordination_notes": "CargoTools module changes are in OneDrive, not PC_AI repo. Uncommitted rust-functiongemma files ready for commit."
  },
  "roadmap": {
    "immediate": [
      "Commit rust-functiongemma uncommitted files",
      "Test rust-functiongemma-runtime heuristic engine",
      "Verify CargoTools fixes with full test run"
    ],
    "this_week": [
      "Increase CargoTools test coverage to 50%+",
      "Implement rust-functiongemma OpenAI endpoint",
      "Add Invoke-CargoAudit to CargoTools"
    ],
    "tech_debt": [
      "Split Environment.ps1 (7 concerns)",
      "Add ShouldProcess support to -Force operations",
      "Document JSON schema for each CargoTools output"
    ]
  }
}
